import os
import pandas as pd

# The root of the dataset, either PPM-100/train or PPM-100/val or UGD-12k
dataset_path = 'dataset/PPM-100/val'

# Create empty lists to store image and matte file paths
image_paths = []
matte_paths = []

# Traverse the dataset directory structure and store paths
for root, dirs, files in os.walk(dataset_path):
    for file in files:
        if file.endswith('.png') or file.endswith('.jpg'):  # Adjust file extensions if needed
            # Check if the file is in the .ipynb_checkpoints folder
            if '.ipynb_checkpoints' not in root:
                if 'fg' in root:
                    image_paths.append(os.path.join(root, file))
                elif 'alpha' in root:
                    matte_paths.append(os.path.join(root, file)) 

# Define a function to extract the numeric part from the filenames
def get_numeric_part(filename):
    return int(''.join(filter(str.isdigit, filename)))

# Sort the file paths based on the numeric part of the filenames
image_paths = sorted(image_paths, key=get_numeric_part)
matte_paths = sorted(matte_paths, key=get_numeric_part)

# Create a DataFrame to store the paths
data = pd.DataFrame({'image_path': image_paths, 'matte_path': matte_paths})

# Save the DataFrame to a CSV file, either dataset/PPM-100/train/train_dataset_paths.csv, 
#or dataset/PPM-100/val/val_dataset_paths.csv
#or dataset/UGD-12k/dataset_paths.csv
data.to_csv('dataset/PPM-100/val/train_dataset_paths.csv', index=False)
